<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nilsine's Nice Nook for Notable New Notations</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            overflow-y: auto;
            font-family: 'Inter', sans-serif;
            color: #f8fafc;
        }
        #content {
            position: relative;
            z-index: 1;
        }
        canvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 0;
        }
        .animate-marquee {
            animation: marquee 30s linear infinite;
        }
        @keyframes marquee {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
    </style>
</head>
<body class="bg-black font-['Inter'] text-gray-50">
    
    <!-- Content Section -->
    <main class="flex flex-col items-center mx-auto max-w-5xl px-4 py-8 space-y-8">
                <!-- Marquee Banner -->
                <div class="border-b border-violet-600 overflow-hidden whitespace-nowrap py-2">
                    <div class="flex">
                        <div class="animate-marquee inline-block text-xs tracking-wide">
                            Breaking Olds: • I wrote Text here • • • Secrets are scrolling • Strange Times • Other words • • • 
                            Fixing News • New Text Time • • • That was pretty Wizard • Words and Words and Things • End Scroll maybe • • •
                        </div>
                    </div>
                </div>
                <!-- Header Section with Email/Instagram -->
                <div class="my-8 mb-12">
                    <div class="flex justify-center gap-8 text-sm">
                        <a href="mailto:nickwihtol@gmail.com" class="flex items-center hover:text-gray-400">
                            Email 
                            <span class="ml-2 [&>svg]:h-5 [&>svg]:w-5">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 13.5h3.86a2.25 2.25 0 0 1 2.012 1.244l.256.512a2.25 2.25 0 0 0 2.013 1.244h3.218a2.25 2.25 0 0 0 2.013-1.244l.256-.512a2.25 2.25 0 0 1 2.013-1.244h3.859m-19.5.338V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 0 0-2.15-1.588H6.911a2.25 2.25 0 0 0-2.15 1.588L2.35 13.177a2.25 2.25 0 0 0-.1.661Z" />
                              </svg>
                            </span>   
                        </a>
                        <a href="https://github.com/Fellstrike" class="flex items-center hover:text-gray-400" target="_blank">
                            Github
                            <!-- Github -->
                            <span class="ml-2 [&>svg]:h-5 [&>svg]:w-5">
                                <svg
                                xmlns="http://www.w3.org/2000/svg"
                                fill="currentColor"
                                viewBox="0 0 496 512">
                                <!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc. -->
                                <path
                                    d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z" />
                                </svg>
                            </span>
                        </a>
                        <a href="https://fellstrike.itch.io/" class="flex items-center hover:text-gray-400" target="_blank">
                            Itch.io
                            <!-- Itch.io -->
                            <span class="ml-2 [&>svg]:h-5 [&>svg]:w-5">
                                <svg fill="currentColor" width="200" height="200" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">
                                 <g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                                 <g id="SVGRepo_iconCarrier"> <path d="M4.172 1.787c-1.396 0.828-4.145 3.984-4.172 4.812v1.375c0 1.735 1.625 3.267 3.099 3.267 1.771 0 3.251-1.469 3.251-3.213 0 1.744 1.421 3.213 3.197 3.213 1.771 0 3.151-1.469 3.151-3.213 0 1.744 1.516 3.213 3.287 3.213h0.032c1.776 0 3.291-1.469 3.291-3.213 0 1.744 1.381 3.213 3.152 3.213s3.197-1.469 3.197-3.213c0 1.744 1.475 3.213 3.245 3.213 1.479 0 3.104-1.532 3.104-3.267v-1.375c-0.032-0.828-2.776-3.984-4.177-4.812-4.339-0.156-7.344-0.183-11.823-0.183-4.484 0.005-10.593 0.073-11.828 0.183zM12.677 10.421c-0.183 0.308-0.385 0.568-0.625 0.797v0.005c-0.672 0.651-1.588 1.057-2.599 1.057-1.016 0-1.932-0.407-2.599-1.063-0.245-0.235-0.428-0.489-0.6-0.787-0.167 0.297-0.4 0.552-0.645 0.787-0.672 0.656-1.588 1.063-2.599 1.063 0 0 0 0-0.005 0-0.12 0-0.245-0.036-0.349-0.073-0.14 1.485-0.203 2.901-0.224 3.937v0.005c-0.005 0.527-0.005 0.953-0.011 1.552 0.032 3.115-0.307 10.089 1.376 11.803 2.604 0.604 7.396 0.88 12.197 0.885h0.005c4.807-0.005 9.593-0.281 12.197-0.885 1.683-1.713 1.344-8.688 1.376-11.803-0.005-0.599-0.005-1.025-0.011-1.552v-0.005c-0.021-1.036-0.079-2.452-0.224-3.937-0.099 0.037-0.229 0.073-0.349 0.073 0 0-0.005 0-0.005 0-1.011 0-1.927-0.407-2.599-1.063h0.005c-0.245-0.235-0.479-0.489-0.645-0.787h-0.005c-0.167 0.297-0.355 0.552-0.595 0.787-0.667 0.656-1.583 1.063-2.599 1.063-1.011 0-1.927-0.407-2.599-1.063-0.24-0.229-0.443-0.495-0.615-0.787l-0.011-0.016c-0.172 0.308-0.38 0.573-0.615 0.803-0.672 0.656-1.588 1.063-2.599 1.063 0 0-0.005 0-0.005 0-0.031 0-0.068 0-0.104-0.005-0.036 0.005-0.073 0.005-0.109 0.005 0 0 0 0-0.005 0-1.011 0-1.927-0.407-2.593-1.063-0.24-0.229-0.443-0.495-0.609-0.787l-0.011-0.016zM10.005 13.875c1.057 0.005 1.995 0 3.161 1.271 0.916-0.093 1.875-0.14 2.833-0.14s1.917 0.047 2.833 0.14c1.167-1.271 2.104-1.271 3.161-1.271h0.005c0.5 0 2.5 0 3.891 3.912l1.495 5.369c1.109 3.995-0.355 4.095-2.177 4.095-2.708-0.1-4.208-2.068-4.208-4.037-1.5 0.251-3.251 0.371-5 0.371s-3.5-0.12-4.995-0.371c0 1.969-1.5 3.937-4.208 4.037-1.828-0.005-3.292-0.1-2.183-4.095l1.495-5.369c1.396-3.912 3.396-3.912 3.896-3.912zM16 16.953c-0.005 0-2.849 2.62-3.364 3.547l1.864-0.073v1.625c0 0.079 0.751 0.047 1.5 0.011 0.749 0.036 1.495 0.068 1.495-0.011v-1.625l1.869 0.073c-0.515-0.927-3.364-3.547-3.364-3.547z"></path> </g></svg>
                             </span></a>
                        <a href="http://openprocessing.org/user/475647" class="flex items-center hover:text-gray-400">
                            Open Processing
                            <!-- Open Processing -->
                            <span class="ml-2 [&>svg]:h-5 [&>svg]:w-5">
                                <svg fill="currentColor" width="200" height="200" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                                    <!-- Background Circle for the "O" -->
                                    <circle cx="60" cy="100" r="50" />
                                    <!-- Inner cutout for the "O" -->
                                    <circle cx="60" cy="100" r="30" />
                                    
                                    <!-- "P" Shape -->
                                    <rect x="120" y="50" width="30" height="100"  />
                                    <!-- Circular Part of the "P" -->
                                    <circle cx="145" cy="80" r="30"  />
                                    <!-- Inner cutout for the "P" -->
                                    <circle cx="145" cy="80" r="15"  />
                                  </svg>
                            </span>
                        </a>
                    </div>
                </div>

                <!-- Content Grid -->
                <div class="grid grid-cols-12 gap-x-8">
                    <div class="border-t border-b py-6 border-violet-600 col-span-12">
                        <h1 class="text-2xl font-bold italic text-center">Nilsine Wihtol</h1>
                        <div class="italic text-gray-50 text-center">Interactive Artist and Creative Coder</div>
                    </div>
                    <!-- Left Column - Profile Info -->
                    <div class="col-span-12 md:col-span-6 space-y-8 mb-12">
                        <div class="mx-auto border border-violet-600">
                            <img src="img/pictureMe.jpg" alt="Profile Image">
                        </div>
                    </div>

                    <!-- Right Column - Text Content -->
                    <div class="col-span-12 md:col-span-6 space-y-8 mb-12 text-center">
                        <br>
                        <p>I'm Nilsine, an immersive artist out of Portland, OR. I create experiences that blend the real and digital worlds allowing anyone regardless of age 
                            discover and play without shame. I want my work to drive people to interact and explore my art in a natural way.</p>
                        <p>Using small computers my art can register what people are doing and have that change how those people experience my art. </p>
                        <p>My art is influenced by my experiences growing up as a queer nerd in the 90s, playing D&D despite the satanic panic, collaborative online storytelling, 
                            spending time in arcades, and early internet culture. I want to let people rediscover childlike wonder by viewing and interacting with my art. 
                            Hoping that  people can carry those discoveries into their ‘mundane’ life allowing them to find small moments of magic in their day to day experience.</p>
                    </div>
                </div>
                <div class="px-4 py-12 border-t border-violet-600 text-gray-900">
                    <p class="text-gray-50">Put images and video of projects here.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <!-- Gallery Item 1 -->
                        <div class="rounded-lg overflow-hidden shadow-lg transition-transform duration-200 hover:scale-105 bg-white">
                            <div class="relative"><a href="img/lightproto.jpg">
                                <img src="img/lightproto.jpg" alt="prototype" class="w-60 h-60 object-cover">
                                <div class="absolute bottom-0 left-0 right-0 p-2 bg-white bg-opacity-25">
                                    <h3 class="text-sm font-medium text-center">3d printed prototype</h3></a>
                                </div>
                            </div>
                        </div>

                        <!-- Gallery Item 2 --><!-- ADD A VIDEO OF ARDUINO PROGRAMMING HERE-->
                        <div class="rounded-lg overflow-hidden shadow-lg transition-transform duration-200 hover:scale-105 bg-white">
                            <div class="relative"><a href="img/motherboard.jpg">
                                <img src="img/motherboard.jpg" alt="Arduino" class="w-60 h-60 object-cover">
                                <div class="absolute bottom-0 left-0 right-0 p-2 bg-opacity-25 bg-white">
                                    <h3 class="text-sm font-medium text-center">Arduino</h3></a>
                                </div>
                            </div>
                        </div>

                        <!-- Gallery Item 3 --><!-- CHANGE TO A VIDEO OF A KINECT SKETCH-->
                        <div class="rounded-lg overflow-hidden shadow-lg transition-transform duration-200 hover:scale-105 bg-white">
                            <div class="relative"><a href="img/tree.jpg">
                                <img src="img/tree.jpg" alt="Third Thing Instalation" class="w-60 h-60 object-cover">
                                <div class="absolute bottom-0 left-0 right-0 p-2 bg-white bg-opacity-75">
                                    <h3 class="text-sm font-medium text-center">Third Thing Instalation</h3></a>
                                </div>
                            </div>
                        </div>

                        <!-- Gallery Item 4 -->
                        <div class="rounded-lg overflow-hidden shadow-lg transition-transform duration-200 hover:scale-105 bg-white">
                            <div class="relative"><a href="https://p5c2024.netlify.app/">
                                <img src="img/website.png" alt="Custom Gallery Website" class="w-60 h-60 object-cover">
                                <div class="absolute bottom-0 left-0 right-0 p-2 bg-white bg-opacity-75">
                                    <h3 class="text-sm font-medium text-center">Gallery Website</h3></a>
                                </div>
                            </div>
                        </div>

                        <!-- Gallery Item 5 -->
                        <div class="rounded-lg overflow-hidden shadow-lg transition-transform duration-200 hover:scale-105 bg-white">
                            <div class="relative"><a href="img/OldFashionedLogoColor.png">
                                <img src="img/OldFashionedLogoColor.png" alt="Processing" class="w-60 h-60 object-cover">
                                <div class="absolute bottom-0 left-0 right-0 p-2 bg-white bg-opacity-25">
                                    <h3 class="text-sm font-medium text-center">Processing</h3></a>
                                </div>
                            </div>
                        </div>

                        <!-- Gallery Item 6 --><!-- ADD A VIDEO OF THE STARFIELD MAXPATCH AND THE CODE-->
                        <div class="rounded-lg overflow-hidden shadow-lg transition-transform duration-200 hover:scale-105 bg-white">
                            <div class="relative"><a href="https://openprocessing.org/sketch/2413242">
                                <img src="img/maxStarfield.png" alt="p5 Development" class="h-60 w-60 object-top">
                                <div class="absolute bottom-0 left-0 right-0 p-2 bg-slate-100 bg-white bg-opacity-25">
                                    <h3 class="text-sm font-medium text-center">p5 Development</h3></a>
                                </div>
                            </div>
                        </div>

                        <!-- Gallery Item 7 -->
                        <div class="rounded-lg overflow-hidden shadow-lg transition-transform duration-200 hover:scale-105 bg-white">
                            <div class="relative"><a href="story1/index.html">
                                <img src="img/monster2.png" alt="Interactive Fiction" class="w-60 h-60 object-cover">
                                <div class="absolute bottom-0 left-0 right-0 p-2 bg-white bg-opacity-50">
                                    <h3 class="text-sm font-medium text-center">Interactive Fiction</h3></a>
                                </div>
                            </div>
                        </div>

                        <!-- Gallery Item 8 -->
                        <div class="rounded-lg overflow-hidden shadow-lg transition-transform duration-200 hover:scale-105 bg-white">
                            <div class="relative"><a href="img/teardropThing.png">
                                <img src="img/teardropThing.png" alt="Javascript" class="w-60 h-60 object-cover">
                                <div class="absolute bottom-0 left-0 right-0 p-2 bg-white bg-opacity-25">
                                    <h3 class="text-sm font-medium text-center">Javascript</h3></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script>

        // Define custom color palette (HSB mode allows smooth gradients)
        let colorPalette;

        function setup() 
        {
            let canvas = createCanvas(windowWidth, document.body.scrollHeight);
            canvas.position(0, 0);
            canvas.style('z-index', '-1');

        background(55);
        //noLoop(); // Static drawing, no need for continuous loop
        
        noFill(); // Only using strokes for the division lines
        strokeWeight(2);

        colorPalette = [
            color(180, 0, 0), //red       
            color(26, 128, 0),    //green      
            color(0, 0, 180),    //blue  
            color(180, 0, 0), //red       
            color(26, 128, 0),    //green      
            color(0, 0, 180),    //blue 
            color(26, 128, 0),    //green      
            color(0, 0, 180),    //blue 
            color(0, 0, 180),    //blue 
            color(0, 0, 180),    //blue 
        ];

        // Define the initial rectangle as the entire canvas
        let initialRect = {
            x: 0,
            y: 0,
            width: width,
            height: height,
            level: 1 // Starting depth level
        };

        // Start subdivision with the custom color palette
        divideRect(initialRect, 2, colorPalette, 0); // Start with the first color (pink)
        }

        /**
         * Recursively divides a rectangle based on the shuffled 2:3:5 ratio and applies a gradient.
         * @param {Object} rect - The rectangle to divide.
         * @param {Number} splitsLeft - Number of divisions left.
         * @param {Array} colorPalette - The array of colors to cycle through.
         * @param {Number} colorIndex - The index of the current color in the palette.
         */
        function divideRect(rect, splitsLeft, colorPalette, colorIndex) {
        if (splitsLeft <= 0) return;

        // Define and shuffle the ratio
        let ratios = shuffleArray([2, 3, 5]);
        const total = ratios.reduce((a, b) => a + b, 0);

        // Horizontal and vertical division points
        let divX = [];
        let divY = [];

        // Horizontal divisions
        let currentX = rect.x;
        for (let i = 0; i < ratios.length; i++) {
            let sectionWidth = (ratios[i] / total) * rect.width;
            divX.push(currentX + sectionWidth);
            currentX += sectionWidth;
        }

        // Vertical divisions
        let currentY = rect.y;
        let vertRatios = shuffleArray([2, 3, 5]); // Shuffle for vertical divisions
        for (let i = 0; i < vertRatios.length; i++) {
            let sectionHeight = (vertRatios[i] / total) * rect.height;
            divY.push(currentY + sectionHeight);
            currentY += sectionHeight;
        }

        // Set the stroke color from the current color in the palette
        stroke(colorPalette[colorIndex % colorPalette.length]); // Loop back when exceeding color count

        // Draw the division lines
        // Vertical lines
        for (let x of divX.slice(0, -1)) { // Exclude the last division which is the edge
            stroke(colorPalette[colorIndex % colorPalette.length]);
            line(x, rect.y, x, rect.y + rect.height);
            colorIndex++;
        }

        // Horizontal lines
        for (let y of divY.slice(0, -1)) { // Exclude the last division which is the edge
            stroke(colorPalette[colorIndex % colorPalette.length]);
            line(rect.x, y, rect.x + rect.width, y);
            colorIndex++;
        }

        // Now, for each sub-rectangle, divide further
        let sections = [];

        for (let i = 0; i < ratios.length; i++) {
            for (let j = 0; j < vertRatios.length; j++) {
            let subRect = {
                x: i === 0 ? rect.x : divX[i - 1],
                y: j === 0 ? rect.y : divY[j - 1],
                width: (ratios[i] / total) * rect.width,
                height: (vertRatios[j] / total) * rect.height,
                level: rect.level + 1
            };
            sections.push(subRect);
            }
        }

        // Recursively divide each section
        for (let section of sections) {
            let isFiveRatio = ratios[sections.indexOf(section) % ratios.length] === 5;
            let newSplitsLeft = splitsLeft - 1;

            // Allow additional division for sections with '5' ratio that haven't been split twice yet
            if (section.level < 3 || (isFiveRatio && section.level < 4)) {
            newSplitsLeft++;
            }

            // Increment the color index as we subdivide further, looping through the palette
            let newColorIndex = colorIndex; // Move to the next color

            divideRect(section, newSplitsLeft, colorPalette, newColorIndex); // Recursively divide with next color
        }
        }
        /**
         * Shuffles an array randomly.
         * @param {Array} array - The array to shuffle.
         * @returns {Array} - The shuffled array.
         */
        function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
        }

        function windowResized() {
            resizeCanvas(windowWidth, document.body.scrollHeight);
                    background(55);

            let initialRect = {
            x: 0,
            y: 0,
            width: width,
            height: height,
            level: 1 // Starting depth level
        };

        // Start subdivision with the custom color palette
        divideRect(initialRect, 2, colorPalette, 0); // Start with the first color (pink)
        }

        /**
         * Recursively divides a rectangle based on the shuffled 2:3:5 ratio and applies a gradient.
         * @param {Object} rect - The rectangle to divide.
         * @param {Number} splitsLeft - Number of divisions left.
         * @param {Array} colorPalette - The array of colors to cycle through.
         * @param {Number} colorIndex - The index of the current color in the palette.
         */
        function divideRect(rect, splitsLeft, colorPalette, colorIndex) {
        if (splitsLeft <= 0) return;

        // Define and shuffle the ratio
        let ratios = shuffleArray([2, 3, 5]);
        const total = ratios.reduce((a, b) => a + b, 0);

        // Horizontal and vertical division points
        let divX = [];
        let divY = [];

        // Horizontal divisions
        let currentX = rect.x;
        for (let i = 0; i < ratios.length; i++) {
            let sectionWidth = (ratios[i] / total) * rect.width;
            divX.push(currentX + sectionWidth);
            currentX += sectionWidth;
        }

        // Vertical divisions
        let currentY = rect.y;
        let vertRatios = shuffleArray([2, 3, 5]); // Shuffle for vertical divisions
        for (let i = 0; i < vertRatios.length; i++) {
            let sectionHeight = (vertRatios[i] / total) * rect.height;
            divY.push(currentY + sectionHeight);
            currentY += sectionHeight;
        }

        // Set the stroke color from the current color in the palette
        stroke(colorPalette[colorIndex % colorPalette.length]); // Loop back when exceeding color count

        // Draw the division lines
        // Vertical lines
        for (let x of divX.slice(0, -1)) { // Exclude the last division which is the edge
            stroke(colorPalette[colorIndex % colorPalette.length]);
            line(x, rect.y, x, rect.y + rect.height);
            colorIndex++;
        }

        // Horizontal lines
        for (let y of divY.slice(0, -1)) { // Exclude the last division which is the edge
            stroke(colorPalette[colorIndex % colorPalette.length]);
            line(rect.x, y, rect.x + rect.width, y);
            colorIndex++;
        }

        // Now, for each sub-rectangle, divide further
        let sections = [];

        for (let i = 0; i < ratios.length; i++) {
            for (let j = 0; j < vertRatios.length; j++) {
            let subRect = {
                x: i === 0 ? rect.x : divX[i - 1],
                y: j === 0 ? rect.y : divY[j - 1],
                width: (ratios[i] / total) * rect.width,
                height: (vertRatios[j] / total) * rect.height,
                level: rect.level + 1
            };
            sections.push(subRect);
            }
        }

        // Recursively divide each section
        for (let section of sections) {
            let isFiveRatio = ratios[sections.indexOf(section) % ratios.length] === 5;
            let newSplitsLeft = splitsLeft - 1;

            // Allow additional division for sections with '5' ratio that haven't been split twice yet
            if (section.level < 3 || (isFiveRatio && section.level < 4)) {
            newSplitsLeft++;
            }

            // Increment the color index as we subdivide further, looping through the palette
            let newColorIndex = colorIndex; // Move to the next color

            divideRect(section, newSplitsLeft, colorPalette, newColorIndex); // Recursively divide with next color
        }
        }

</script>
</body>
</html>
